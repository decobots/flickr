<!DOCTYPE html>
<html>
<head>
<!--<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/core-ajax/core-ajax.html">-->
<script src="bower_components/webcomponentsjs/webcomponents.js"></script>
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="md5.js"></script>
<script type="text/javascript">
        localStorage["apiKey"]="82a28696e8c90d375fa37aaea9bfa6b8";
		localStorage["secret"]="f927e103f3d9d375";
		var format="json";
        var api_sig;
    function request(method,callback,arguments){
            signature = MD5( localStorage["secret"] + "api_key" + localStorage["apiKey"] + "formatjsonfrob" +    localStorage["frob"] + "method" + method);
            req= "http://api.flickr.com/services/rest/?method=" + method + "&api_key=" + localStorage["apiKey"] + "&frob=" + localStorage["frob"] + "&format=json&api_sig=" + signature;
        
           $.ajax({
                        dataType: "jsonp",
                        url: req,
                        crossDomain :true,
                        jsonp: false,
                        cache: true,
            }).done(function(data){window['callback'](data); }  ) ;

        }
		function load(){
           localStorage["frob"]=window.document.location.search.split("?frob=")[1];
            request("flickr.auth.getToken","jsonFlickrApi");
        }
           
    
     function jsonFlickrApi (response) {
          console.log(response );
         localStorage["token"]=response.auth.user._content;
          localStorage["fullname"]=response.auth.user.fullname;
          localStorage["nsid"]=response.auth.user.nsid;
          localStorage["username"]=response.auth.user.username;
    }
		</script>
</head>
	<body onload="load()">
		

	</body>
</html>